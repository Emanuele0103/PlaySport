<div class="settings-container">
  <button class="back-button" (click)="goBack()">
    <i class="fas fa-arrow-left"></i>
  </button>

  <h2 class="settings-title">Impostazioni Utente</h2>

  <div class="button-group full-width">
    <button class="settings-button full" [routerLink]="['/le-mie-prenotazioni']">
      ğŸ“… Le mie prenotazioni
    </button>
  </div>

  <div class="button-group">
    <button class="settings-button" (click)="showProfileForm()">âœï¸ Modifica Profilo</button>
  </div>

  <!-- Toggle Tema Scuro -->
  <div class="theme-toggle">
    <label class="switch">
      <input type="checkbox" (change)="toggleTheme($event)">
      <span class="slider round"></span>
    </label>
    <span class="theme-label">Tema Scuro</span>
  </div>

  <!-- Bottone elimina account -->
  <button class="settings-button danger full" (click)="confirmDelete()">
    ğŸ—‘ï¸ Elimina il mio account
  </button>

  <!-- Modulo modifica profilo -->
  <div *ngIf="isProfileEditing" class="profile-form">
    <h3>Modifica Profilo</h3>

    <form (ngSubmit)="updateProfile()" #profileForm="ngForm">
      <!-- Email -->
      <input type="email" [(ngModel)]="user.email" name="email" placeholder="Email" required />

      <!-- Avatar upload -->
      <label for="avatar">Foto Profilo</label>
      <input type="file" (change)="onFileSelected($event)" id="avatar" />

      <!-- Cambia Password integrato -->
      <h4>Cambia Password (opzionale)</h4>
      <input type="password" [(ngModel)]="oldPassword" name="oldPassword" placeholder="Vecchia password" />
      <input type="password" [(ngModel)]="newPassword" name="newPassword" placeholder="Nuova password" />

      <button type="submit" class="settings-button">ğŸ’¾ Salva</button>
    </form>

    <!-- Feedback -->
    <p *ngIf="feedbackMessage" class="success">{{ feedbackMessage }}</p>
    <p *ngIf="errorMessage" class="error">{{ errorMessage }}</p>
  </div>
</div>